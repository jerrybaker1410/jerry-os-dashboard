import{j as e}from"./vendor-query-BDlgVFKC.js";import{v as u,S as g,C as o,f as l,b as f,c as j}from"./index-BLPMiw5x.js";import{P as x}from"./PageHeader-DXQHnwq5.js";import{C as i}from"./Badge-9NDiIoki.js";import"./MetricCard-Dry5Bpqx.js";import"./StatusBadge-x29XDuZr.js";import{E as y}from"./EmptyState-BRa_Xz5S.js";import{e as b}from"./vendor-react-C3UgDDkQ.js";import{a as v,A as h,o as p,D as N,Z as S,B as w,T as C,d as T,C as k}from"./vendor-icons-DvjlSrBB.js";import"./vendor-dates-DKd7Sy4i.js";function c({label:t,value:a,icon:n,color:r="text-text-primary"}){return e.jsxs(i,{padding:"none",className:"px-4 py-3 flex items-center gap-3",children:[e.jsx(n,{size:16,className:"text-text-muted shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:`text-lg font-bold font-data ${r}`,children:a}),e.jsx("div",{className:"text-caption text-text-muted uppercase tracking-wider",children:t})]})]})}function R({run:t}){const a=t.result==="ok"||t.result==="unknown"?"text-accent-green":"text-accent-red";return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-elevated transition-colors",children:[e.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${t.result==="ok"||t.result==="unknown"?"bg-accent-green":"bg-accent-red"}`}),e.jsx("span",{className:"text-sm text-text-primary flex-1 truncate",children:t.name}),e.jsx("span",{className:"text-xs text-text-muted font-data",children:t.agentId||"—"}),e.jsx("span",{className:`text-xs font-data ${a}`,children:t.result==="unknown"?"ran":t.result}),e.jsx("span",{className:"text-xs text-text-muted font-data",children:j(new Date(t.lastRunAt).toISOString())})]})}function D({cron:t}){const a=t.nextRunAt-Date.now(),n=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4),d=n>0?`${n}h ${r}m`:`${r}m`;return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-elevated transition-colors",children:[e.jsx(k,{size:12,className:"text-text-muted shrink-0"}),e.jsx("span",{className:"text-sm text-text-primary flex-1 truncate",children:t.name}),e.jsx("span",{className:"text-xs text-text-muted font-data",children:t.agentId||"—"}),e.jsxs("span",{className:"text-xs text-accent-blue font-data",children:["in ",d]})]})}function U(){const{data:t,isLoading:a,refetch:n}=u(),r=b(),d=()=>{const s=new Date().getHours();return s<12?"Good morning":s<17?"Good afternoon":"Good evening"};if(a)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{title:"Morning Brief",subtitle:"Loading..."}),e.jsx(g,{})]});if(!t)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{title:"Morning Brief",onRefresh:n}),e.jsx(y,{icon:v,title:"No brief data",subtitle:"Could not fetch morning brief from the API"})]});const m=t.costToday?.daily>o.critical?"text-accent-red":t.costToday?.daily>o.warning?"text-accent-yellow":"text-accent-green";return e.jsxs("div",{className:"page-enter space-y-6",children:[e.jsx(x,{title:`${d()}, Demetri`,subtitle:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),onRefresh:n}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(c,{label:"Sessions (24h)",value:t.sessionsSince24h,icon:h}),e.jsx(c,{label:"Cron Runs (24h)",value:t.cronRunsSince24h?.length||0,icon:p}),e.jsx(c,{label:"Cost Today",value:l(t.costToday?.daily||0),icon:N,color:m}),e.jsx(c,{label:"Tokens (24h)",value:f(t.totalTokens),icon:S})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(i,{padding:"none",children:[e.jsx(i.Header,{title:"Overnight Cron Results",subtitle:`${t.cronRunsSince24h?.length||0} runs`}),e.jsx("div",{className:"divide-y divide-border-default max-h-64 overflow-y-auto",children:!t.cronRunsSince24h||t.cronRunsSince24h.length===0?e.jsx("p",{className:"text-sm text-text-muted text-center py-6",children:"No cron runs in the last 24h"}):t.cronRunsSince24h.map(s=>e.jsx(R,{run:s},s.id))})]}),e.jsxs(i,{padding:"none",children:[e.jsx(i.Header,{title:"Upcoming Crons",subtitle:"next 12h"}),e.jsx("div",{className:"divide-y divide-border-default max-h-64 overflow-y-auto",children:!t.upcomingCrons||t.upcomingCrons.length===0?e.jsx("p",{className:"text-sm text-text-muted text-center py-6",children:"No upcoming crons"}):t.upcomingCrons.map(s=>e.jsx(D,{cron:s},s.id))})]})]}),t.costToday&&e.jsxs(i,{children:[e.jsx("h2",{className:"text-sm font-semibold text-text-primary mb-3",children:"Cost Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-caption text-text-muted uppercase tracking-wider mb-1",children:"Today"}),e.jsx("div",{className:`text-lg font-bold font-data ${m}`,children:l(t.costToday.daily)}),e.jsx("div",{className:"w-full h-1.5 bg-elevated rounded-full mt-1.5",children:e.jsx("div",{className:`h-full rounded-full transition-all ${t.costToday.daily>o.critical?"bg-accent-red":t.costToday.daily>o.warning?"bg-accent-yellow":"bg-accent-green"}`,style:{width:`${Math.min(t.costToday.daily/o.critical*100,100)}%`}})}),e.jsxs("div",{className:"text-micro text-text-muted mt-0.5",children:["Budget: ",l(o.critical),"/day"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-caption text-text-muted uppercase tracking-wider mb-1",children:"This Week"}),e.jsx("div",{className:"text-lg font-bold font-data text-text-primary",children:l(t.costToday.weekly)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-caption text-text-muted uppercase tracking-wider mb-1",children:"This Month"}),e.jsx("div",{className:"text-lg font-bold font-data text-text-primary",children:l(t.costToday.monthly)})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"Cron Operations",path:"/tasks",icon:p},{label:"Agent Fleet",path:"/agents",icon:h},{label:"Memory Browser",path:"/memory",icon:w},{label:"System Health",path:"/health",icon:C}].map(s=>e.jsxs("button",{type:"button",onClick:()=>r(s.path),className:"flex items-center gap-2 bg-surface border border-border-default rounded-lg px-4 py-3 hover:border-border-hover transition-colors group text-left",children:[e.jsx(s.icon,{size:14,className:"text-text-muted"}),e.jsx("span",{className:"text-sm text-text-secondary group-hover:text-text-primary transition-colors flex-1",children:s.label}),e.jsx(T,{size:12,className:"text-text-muted opacity-0 group-hover:opacity-50 transition-opacity"})]},s.path))}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-sm font-semibold text-text-primary",children:"Fleet Status"}),e.jsxs("span",{className:"text-xs text-text-muted font-data",children:[t.enabledCronJobs,"/",t.totalCronJobs," crons enabled"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-text-secondary",children:[e.jsx("span",{className:"text-accent-green font-bold font-data",children:t.activeSessions})," active sessions"]}),e.jsx("span",{className:"text-text-muted",children:"·"}),e.jsxs("span",{className:"text-text-secondary",children:[e.jsx("span",{className:"font-bold font-data text-text-primary",children:t.sessionsSince24h})," sessions in 24h"]}),e.jsx("span",{className:"text-text-muted",children:"·"}),e.jsxs("span",{className:"text-text-secondary",children:[e.jsx("span",{className:"font-bold font-data text-text-primary",children:t.upcomingCrons?.length||0})," crons upcoming"]})]})]})]})}export{U as default};
