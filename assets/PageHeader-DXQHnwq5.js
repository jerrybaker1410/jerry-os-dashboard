import{j as e,u as N}from"./vendor-query-BDlgVFKC.js";import{r as c}from"./vendor-react-C3UgDDkQ.js";import{x as k}from"./index-BLPMiw5x.js";import{O as $,R as w}from"./vendor-icons-DvjlSrBB.js";const u={primary:"bg-accent-blue/10 text-accent-blue border border-accent-blue/20 hover:bg-accent-blue/20",secondary:"bg-surface text-text-secondary border border-border-default hover:bg-elevated hover:text-text-primary hover:border-border-hover",ghost:"text-text-muted hover:text-text-primary hover:bg-elevated",danger:"bg-accent-red/10 text-accent-red border border-accent-red/20 hover:bg-accent-red/20",link:"text-accent-blue hover:underline"},p={xs:"text-caption px-2 py-1 gap-1",sm:"text-xs px-2.5 py-1.5 gap-1.5",md:"text-sm px-3 py-2 gap-2"},f=c.memo(c.forwardRef(function({variant:r="secondary",size:a="sm",icon:t,iconRight:n,active:l=!1,disabled:s=!1,className:o="",children:i,...d},x){const y=r==="link"?u.link:`inline-flex items-center justify-center font-medium rounded-md transition-colors ${u[r]||u.secondary}`,v=r==="link"?`text-xs ${p[a]?.split(" ").filter(S=>S.startsWith("gap")).join(" ")||""}`:p[a]||p.sm,j=l?"bg-accent-blue/10 text-accent-blue border-accent-blue/20":"",C=s?"opacity-50 pointer-events-none":"",g=a==="xs"?12:a==="sm"?14:16;return e.jsxs("button",{ref:x,type:"button",disabled:s,className:`${y} ${v} ${j} ${C} ${o}`.trim(),...d,children:[t&&e.jsx(t,{size:g,className:"shrink-0"}),i,n&&e.jsx(n,{size:g,className:"shrink-0"})]})}));f.displayName="Button";const b={xs:{padding:"p-1",icon:12},sm:{padding:"p-1.5",icon:14},md:{padding:"p-2",icon:16},lg:{padding:"p-2.5",icon:18}},h=c.memo(c.forwardRef(function({icon:r,size:a="md",variant:t="ghost",label:n,className:l="",...s},o){if(!r)return null;const{padding:i,icon:d}=b[a]||b.md,x=t==="ghost"?"text-text-muted hover:text-text-primary hover:bg-elevated":t==="danger"?"text-text-muted hover:text-accent-red hover:bg-accent-red/10":"text-text-muted hover:text-text-primary";return e.jsx("button",{ref:o,type:"button",className:`${i} rounded-md transition-colors ${x} ${l}`,title:n,"aria-label":n,...s,children:e.jsx(r,{size:d})})}));h.displayName="IconButton";function T({title:m,subtitle:r,actions:a,onRefresh:t}){const n=k(),l=N(),[s,o]=c.useState(!1),i=c.useRef(null),d=async()=>{if(!s){o(!0),n.warning("Click again within 3s to confirm EMERGENCY STOP"),clearTimeout(i.current),i.current=setTimeout(()=>o(!1),3e3);return}o(!1),clearTimeout(i.current);try{await fetch("/jerry-os-dashboard/overview/api/emergency/stop",{method:"POST"}),n.warning("Kill signal sent — checking status…"),l.invalidateQueries(),t&&t()}catch{n.error("Failed to send kill signal (is proxy running?)")}};return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-primary tracking-tight",children:m}),r&&e.jsx("p",{className:"text-sm text-text-muted mt-1",children:r})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a,e.jsx(f,{variant:"danger",size:"md",icon:$,onClick:d,className:s?"bg-accent-red/30 border-accent-red/50 animate-pulse":"",title:s?"Click again to confirm":"Kill all active sessions",children:s?"Confirm Stop":"Stop All"}),t&&e.jsx(h,{icon:w,size:"lg",onClick:t,label:"Refresh data"})]})]})}export{f as B,T as P};
