import{j as e,a as b}from"./vendor-query-BDlgVFKC.js";import{r as n}from"./vendor-react-C3UgDDkQ.js";import{s as h,t as f}from"./index-BLPMiw5x.js";import{P as y}from"./PageHeader-DXQHnwq5.js";import{E as x}from"./EmptyState-BRa_Xz5S.js";import{C as j}from"./CopyButton-B9VrSSor.js";import{i as g,B as i,C as N,F as m}from"./vendor-icons-DvjlSrBB.js";import"./vendor-dates-DKd7Sy4i.js";function v(s){return b({queryKey:["memory-content",s],queryFn:()=>f(s),enabled:!!s})}function w(s,r=300){const[a,l]=n.useState(s),o=n.useRef(null);return n.useEffect(()=>(clearTimeout(o.current),o.current=setTimeout(()=>l(s),r),()=>clearTimeout(o.current)),[s,r]),a}function S({path:s}){const{data:r,isLoading:a}=v(s);return a?e.jsxs("div",{className:"bg-surface border border-border-default rounded-lg p-6",children:[e.jsx("div",{className:"animate-skeleton-pulse bg-elevated rounded h-4 w-48 mb-4"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((l,o)=>e.jsx("div",{className:"animate-skeleton-pulse bg-elevated rounded h-3",style:{width:`${60+Math.random()*40}%`}},o))})]}):r?.content?e.jsxs("div",{className:"bg-surface border border-border-default rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 border-b border-border-default bg-elevated/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{size:14,className:"text-text-muted"}),e.jsx("span",{className:"text-xs text-text-secondary font-data",children:s})]}),e.jsx(j,{text:r.content,display:"Copy all",mono:!1})]}),e.jsx("pre",{className:"p-4 text-sm text-text-secondary font-mono leading-relaxed whitespace-pre-wrap overflow-y-auto max-h-[600px]",children:r.content})]}):e.jsx(x,{icon:m,title:"Could not load file",subtitle:r?.error||"File not found"})}function B(){const[s,r]=n.useState(""),[a,l]=n.useState(null),o=w(s,400),{data:d=[],isLoading:c,isFetching:u}=h(o);return e.jsxs("div",{className:"page-enter space-y-4",children:[e.jsx(y,{title:"Memory Browser",subtitle:"Search agent memory and knowledge base"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted"}),e.jsx("input",{type:"text",value:s,onChange:t=>r(t.target.value),placeholder:"Search memories... (MEMORY.md, daily notes, brain)",className:"w-full pl-12 pr-4 py-3.5 bg-surface border border-border-default rounded-lg text-base text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-blue transition-colors","aria-label":"Search memories",autoFocus:!0}),u&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-accent-blue/30 border-t-accent-blue rounded-full animate-spin"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",style:{minHeight:"400px"},children:[e.jsxs("div",{className:"bg-surface border border-border-default rounded-lg overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-4 py-2.5 border-b border-border-default",children:e.jsx("p",{className:"text-xs text-text-muted",children:s.length<2?"Type to search":c?"Searching...":`${d.length} results`})}),e.jsxs("div",{className:"flex-1 overflow-y-auto divide-y divide-border-default",children:[s.length>=2&&d.length===0&&!c&&e.jsx(x,{icon:i,title:"No memories found",subtitle:`No results for "${s}"`}),d.map((t,p)=>e.jsxs("button",{type:"button",className:`w-full text-left px-4 py-3 hover:bg-elevated/50 transition-colors ${a===(t.source||t.key)?"bg-accent-blue/10 border-l-2 border-l-accent-blue":"border-l-2 border-l-transparent"}`,onClick:()=>l(t.source||t.key),children:[e.jsx("p",{className:"text-sm text-text-primary truncate",children:t.key||t.title||"Memory entry"}),t.snippet&&e.jsx("p",{className:"text-xs text-text-muted mt-1 line-clamp-2",children:t.snippet}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[t.source&&e.jsx("span",{className:"text-caption px-1.5 py-0.5 rounded bg-elevated text-text-muted",children:t.source}),t.score!=null&&e.jsxs("span",{className:"text-caption text-text-muted font-data",children:["score: ",t.score.toFixed(2)]}),t.timestamp&&e.jsxs("span",{className:"text-caption text-text-muted flex items-center gap-1",children:[e.jsx(N,{size:9})," ",new Date(t.timestamp).toLocaleDateString()]})]})]},t.key||p))]})]}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsx(S,{path:a}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{size:32,className:"mx-auto text-text-muted mb-3"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Search and select a memory to view its contents"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Searches MEMORY.md, daily notes, and brain directory"})]})})})]})]})}export{B as default};
